<% if user_signed_in? %>
  <div>
    <%= render 'user/tagsearches/tagsearch' %>
  </div>
  <div>
    <%= render "user/searches/form" %>
  </div>
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Notification
      <span class="badge badge-danger"><%= current_user.notifications.where(read: false).count %></span>
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="width: 270px;">
      <% if current_user.notifications.where(read: false).any? %>
        <small class="disabled" style="display: block;">直近5件の未読の通知を表示しています</small>
        <% current_user.notifications.where(read: false).limit(5).order(created_at: :desc).each do |notification| %>
          <%= link_to notification_message(notification), notification_path(notification), method: :patch, style: "display: block;" %>
        <% end %>
      <% else %>
        <span class="dropdown-item disabled">未読の通知はありません</span>
      <% end %>
    </div>
  </div>
<% end %>