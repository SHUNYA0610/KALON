<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" >
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="background-color: #D43EFF; border-radius: 15px; padding: 10px">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel" style="color: white; font-weight: 700;">新しくポスト</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: white;">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= form_with model: post do |f| %>

          <div>
            <%= f.text_field :shop, placeholder: "ショップネーム", style: "padding: 8px;border-radius: 12px; margin-bottom: 15px; width: 100%; border: white;" %>
          </div>
          <div>
            <%= text_field_tag :zipcode, nil, placeholder: "郵便番号", style: "padding: 8px;border-radius: 12px; margin-bottom: 15px; width: 100%; border: white;" %>
          </div>
          <div>
            <%= f.text_field :address, placeholder: "住所", style: "padding: 8px;border-radius: 12px; margin-bottom: 15px; width: 100%; border: white;" %>
          </div>
          <div>
            <%= f.text_area :caption, placeholder: "コメント", style: "padding: 8px;border-radius: 12px; margin-bottom: 10px; width: 100%; border: white;" %>
          </div>
          <div>
          <%= f.text_field :category, placeholder: "カテゴリー", style: "padding: 8px;border-radius: 12px; margin-bottom: 10px; width: 100%; border: white;" %>
          </div>
          <div>
            <%= f.label :画像 %>
            <%= f.file_field :image, accept: "image/*", style: "margin-top: 5px;" %>
          </div>
          <div>
            <%= f.submit "ポストする" , style: "color: white; padding: 8px;border-radius: 12px; margin-bottom: 10px; width: 100%; border: 3px white solid;; background-color: #D43EFF; margin-top: 15px;"%>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function() {
    // Initially disable the submit button and apply initial styles
    var submitButton = $('input[type="submit"]');
    submitButton.prop('disabled', true).css({
      'color': 'white',
      'padding': '8px',
      'border-radius': '12px',
      'margin-bottom': '10px',
      'width': '100%',
      'border': '3px white solid',
      'background-color': '#CCCCCC'  // Initial color when disabled
    });

    // Enable submit button only if comment is not empty
    $('textarea[name="post[caption]"]').keyup(function() {
      var empty = $(this).val().trim() === '';
      submitButton.prop('disabled', empty);
      if (empty) {
        submitButton.css('background-color', '#CCCCCC');  // Change to disabled color
      } else {
        submitButton.css('background-color', '#D43EFF');  // Change to enabled color
      }
    });

    // Change button color when hovered (optional)
    submitButton.hover(function() {
      if (!$(this).prop('disabled')) {
        $(this).css('background-color', '#AA1FD4');  // Color when hovered and enabled
      }
    }, function() {
      if (!$(this).prop('disabled')) {
        $(this).css('background-color', '#D43EFF');  // Restore original color when not hovered
      }
    });
  });
</script>

<%= javascript_pack_tag "jpostal",  'data-turbolinks-track': 'reload' %>